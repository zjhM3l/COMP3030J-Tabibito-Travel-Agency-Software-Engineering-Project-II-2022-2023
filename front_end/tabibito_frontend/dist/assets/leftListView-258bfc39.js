import{L as a}from"./index.esm-edc83051.js";import{_ as e,q as t,r as l,H as o,D as i,a as s,o as n,c as r,b as c,d as u,w as d,h as p,F as h,e as v,t as _,f as m,p as g,j as w}from"./index-5baf022e.js";import{N as y}from"./navigationBar-ac3b4d44.js";import{H as k,L as T,T as b,C as f,S,a as C,b as D}from"./TodayOutline-5268bd72.js";import{A as L}from"./ArrowForward-f77163b8.js";const j=t({name:"leftListView",components:{NavigationBar:y,HeartOutline:k,LocationOutline:T,TodayOutline:b,CompassOutline:f,Search:S,StatsChartOutline:C,Star:D,ArrowForward:L},setup(){const e=l([]),t=o();let s="en-US";"zh"===t.language&&(s="zh-CN");let n=l(null),r=l(null),c=l(null),u=l(null);const d=l(!1);let p=l(null),h=l(null),v=l({}),_=1;const m=i();return{currentLocation:c,startTime:n,endTime:r,tourType:u,price:p,duration:h,products:v,countPage:_,raw_trip_data:e,project_loc:null,project_zoom:1,locations:[],loadMap(){new a({apiKey:"AIzaSyBctzU8ocpP_0j4IdTRqA-GABIAnaXd0ow",version:"beta",libraries:["marker"],language:s}).load().then((a=>{const e=this.project_loc;let t=new a.maps.Map(document.getElementById("map"),{center:e,zoom:this.project_zoom,mapId:"jkhjkhkjhjkh"});const l=this.locations,o=new a.maps.InfoWindow;l.forEach((({position:e,title:l},i)=>{const s=new a.maps.marker.PinView({glyph:`${i+1}`}),n=new a.maps.marker.AdvancedMarkerView({position:e,map:t,title:`${i+1}. ${l}`,content:s.element});n.addListener("click",(({domEvent:a,latLng:e})=>{o.close(),o.setContent(n.title),o.open(n.map,n)}))}))}))},handleClick(){d.value=!0,setTimeout((()=>{d.value=!1}),2e3)},priceoptions:[{label:"Less than $500",value:"-500",key:"-500"},{label:"$500 - $1000",value:"500-1000",key:"500-1000"},{label:"$1000 - $2000",value:"1000-2000",key:"1000-2000"},{label:"$2000+",value:"2000+",key:"2000+"}],durationoptions:[{label:"1 week",value:"1 week",key:"1 week"},{label:"2 weeks",value:"2 weeks",key:"2 weeks"},{label:"3 weeks",value:"3 weeks",key:"3 weeks"},{label:"1 month",value:"1 month",key:"1 month"}],languageoptions:[{label:"English",value:"English",key:"English"},{label:"Italian",value:"Italian",key:"Italian"},{label:"Deutsch",value:"Deutsch",key:"Deutsch"},{label:"Turkish",value:"Turkish",key:"Turkish"}],sortoptions:[{label:"discount (high to low)",key:"discount (high to low)"},{label:"discount (low to high)",key:"discount (low to high)"},{label:"price (high to low)",key:"price (high to low)"},{label:"price (low to high)",key:"price (low to high)"}],locOptions:[{label:"London",key:"London",value:"London"},{label:"China",key:"China",value:"China"},{label:"England",key:"England",value:"England"},{label:"Ireland",key:"Ireland",value:"Ireland"}],typeOptions:[{label:"Wildlife Tour",key:"Wildlife Tour",value:"Wildlife Tour"},{label:"Adventure Tour",key:"Adventure Tour",value:"Adventure Tour"},{label:"City Tours",key:"City Tours",value:"City Tours"},{label:"Museum Tours",key:"Museum Tours",value:"Museum Tours"},{label:"Beaches Tour",key:"Beaches Tour",value:"Beaches Tour"}],handleSelectLoc(a){},handleSelectType(a){},handleSelectSort(a){m.info(String(a))},handleSelectPrice(a){},handleSelectDuration(a){},secureStartTime:a=>null!=r.value?a<Date.now()||a>r.value:a<Date.now(),secureEndTime:a=>null!=n.value?a<Date.now()||a<n.value:a<Date.now(),handleSearchProject(){this.axios.post("/search/product_list",{page:1,startTime:n.value,endTime:r.value,currentLocation:c.value,tourType:u.value,price:p.value,duration:h.value}).then((a=>{if(200===a.status){v.value=a.data.products;for(let a=0;a<v.value.length;a++){let e=v.value[a].duration,t=Math.round(e/3600),l=Math.round(t/24);t>24&&1===l&&(v.value[a].duration="1 Day"),t>24&&l>1&&(v.value[a].duration=l+" Days"),1===t&&(v.value[a].duration="1 Hour"),t<24&&1!==t&&(v.value[a].duration=t+" Hours")}this.project_loc={lat:a.data.products.map_latitude,lng:a.data.products.map_longitude},this.project_zoom=a.data.products.map_zoom,this.raw_trip_data.value=a.data.products;for(let a=0;a<this.raw_trip_data.value.length;a++)this.locations.push({position:{lat:this.raw_trip_data.value[a].location.map_latitude,lng:this.raw_trip_data.value[a].location.map_longitude},title:this.raw_trip_data.value[a].location.exact}),this.itineraryData.push({name:this.raw_trip_data.value[a].activity,time:"Day "+this.raw_trip_data.value[a].day+", "+this.raw_trip_data.value[a].time_of_day+" "+this.raw_trip_data.value[a].time,description:this.raw_trip_data.value[a].location.exact,picture:this.raw_trip_data.value[a].picture});this.loadMap()}})),this.axios.post("/search/product_number",{startTime:n.value,endTime:r.value,currentLocation:c.value,tourType:u.value,price:p.value,duration:h.value}).then((a=>{if(200===a.status){const e=a.data.number;_=Math.floor(e/3)+(e%3>0?1:0)}}))}}},created(){this.axios.post("/product/trips",{product_id:9}).then((a=>{this.project_loc={lat:a.data.location.map_latitude,lng:a.data.location.map_longitude},this.project_zoom=a.data.location.map_zoom,this.raw_trip_data.value=a.data.trips;for(let e=0;e<this.raw_trip_data.value.length;e++)this.locations.push({position:{lat:this.raw_trip_data.value[e].location.map_latitude,lng:this.raw_trip_data.value[e].location.map_longitude},title:this.raw_trip_data.value[e].location.exact}),this.itineraryData.push({name:this.raw_trip_data.value[e].activity,time:"Day "+this.raw_trip_data.value[e].day+", "+this.raw_trip_data.value[e].time_of_day+" "+this.raw_trip_data.value[e].time,description:this.raw_trip_data.value[e].location.exact,picture:this.raw_trip_data.value[e].picture});this.loadMap()})),this.axios.post("/search/product_list",{page:1,startTime:null,endTime:null,currentLocation:null,tourType:null,price:null,duration:null}).then((a=>{if(200===a.status){this.products=a.data.products;for(let a=0;a<this.products.length;a++){let e=this.products[a].duration,t=Math.round(e/3600),l=Math.round(t/24);t>24&&1===l&&(this.products[a].duration="1 Day"),t>24&&l>1&&(this.products[a].duration=l+" Days"),1===t&&(this.products[a].duration="1 Hour"),t<24&&1!==t&&(this.products[a].duration=t+" Hours")}}})),this.axios.post("/search/product_number",{startTime:Date.now(),endTime:2*Date.now(),currentLocation:l(),tourType:l(),price:l(),duration:l()}).then((a=>{if(200===a.status){const e=a.data.number;self.countPage=Math.floor(e/3)+(e%3>0?1:0)}}))},data:()=>({countPage:l(),itineraryData:[],products:[]}),methods:{pageChange(a){axios.post("/search/product_list",{page:a,startTime:startTime.value,endTime:endTime.value,currentLocation:currentLocation.value,tourType:tourType.value,price:price.value,duration:duration.value}).then((function(a){products.value=a.data})).catch((function(a){}))}}}),x=a=>(g("data-v-667c34cc"),a=a(),w(),a),I={class:"halfMap"},z={class:"list_content"},M={class:"list_search_wrap"},O={class:"list_search"},P={class:"loc_wrap"},$={class:"loc_head"},A={class:"loc_margin"},E=x((()=>u("h4",{class:"loc_title"},"Destinations",-1))),U={class:"loc_input"},B={class:"date_wrap"},H={class:"loc_head"},F={class:"loc_margin"},V=x((()=>u("h4",{class:"loc_title"},"Check in - Check out",-1))),W={class:"loc_input"},N=x((()=>u("span",null,"-",-1))),q={class:"guests_wrap"},G={class:"loc_head"},K={class:"loc_margin"},R=x((()=>u("h4",{class:"loc_title"},"Tour Type",-1))),X={class:"loc_input"},J={class:"search_btn"},Q={class:"row x-gap-10 y-gap-10 select_menu"},Y={class:"row y-gap-10 property"},Z=x((()=>u("div",{class:"col-auto"},[u("div",{class:"property_text"},[u("span",{class:"property_num"},"3,269 properties"),p(" in Europe")])],-1))),aa={class:"col-auto"},ea={class:"row y-gap-20 contents_wrap"},ta={class:"col-12"},la={class:"content_wrap"},oa={class:"col-md-auto"},ia={class:"content_left ratio ratio-1:1"},sa={class:"cardImage_content"},na=["src"],ra={class:"cardImage_wish"},ca={class:"col-md"},ua={class:"title"},da={class:"location"},pa={class:"opt1"},ha={class:"opt2"},va={class:"col-md-auto content_right"},_a={class:"stars x-gap-10"},ma={class:"reviews"},ga=x((()=>u("div",{class:"from"},"From",-1))),wa={class:"price"},ya=x((()=>u("div",{class:"per"},"per adult",-1))),ka=["onClick"],Ta=x((()=>u("div",{class:"map_content"},[u("div",{class:"map",id:"map"})],-1)));const ba=e(j,[["render",function(a,e,t,l,o,i){const g=s("navigation-bar"),w=s("LocationOutline"),y=s("n-icon"),k=s("n-select"),T=s("TodayOutline"),b=s("n-date-picker"),f=s("CompassOutline"),S=s("Search"),C=s("n-button"),D=s("StatsChartOutline"),L=s("n-dropdown"),j=s("HeartOutline"),x=s("Star"),ba=s("ArrowForward"),fa=s("n-pagination");return n(),r(h,null,[c(g,{class:"zup"}),u("div",I,[u("div",z,[u("div",M,[u("div",O,[u("div",P,[u("div",$,[c(y,{class:"icon_loc"},{default:d((()=>[c(w)])),_:1}),u("div",A,[E,u("div",U,[c(k,{class:"dropdown",value:a.currentLocation,"onUpdate:value":e[0]||(e[0]=e=>a.currentLocation=e),options:a.locOptions,clearable:"",placeholder:"Select",onSelect:a.handleSelectLoc},null,8,["value","options","onSelect"])])])])]),u("div",B,[u("div",H,[c(y,{class:"icon_loc"},{default:d((()=>[c(T)])),_:1}),u("div",F,[V,u("div",W,[c(b,{value:a.startTime,"onUpdate:value":e[1]||(e[1]=e=>a.startTime=e),type:"date","is-date-disabled":a.secureStartTime,size:"small",clearable:"",placeholder:a.$t("homepage.searchPart.st")},null,8,["value","is-date-disabled","placeholder"]),N,c(b,{value:a.endTime,"onUpdate:value":e[2]||(e[2]=e=>a.endTime=e),type:"date",placement:"bottom-end","is-date-disabled":a.secureEndTime,size:"small",clearable:"",placeholder:a.$t("homepage.searchPart.et")},null,8,["value","is-date-disabled","placeholder"])])])])]),u("div",q,[u("div",G,[c(y,{class:"icon_loc"},{default:d((()=>[c(f)])),_:1}),u("div",K,[R,u("div",X,[c(k,{class:"dropdown",value:a.tourType,"onUpdate:value":e[3]||(e[3]=e=>a.tourType=e),options:a.typeOptions,clearable:"",placeholder:"Tour Type",onSelect:a.handleSelectType},null,8,["value","options","onSelect"])])])])]),u("div",J,[c(C,{class:"btn_search",color:"#3554D1",onClick:a.handleSearchProject},{default:d((()=>[c(y,{class:"icon_search"},{default:d((()=>[c(S)])),_:1})])),_:1},8,["onClick"])])])]),u("div",Q,[c(k,{class:"dropdown",value:a.price,"onUpdate:value":e[4]||(e[4]=e=>a.price=e),options:a.priceoptions,clearable:"",placeholder:"Price",onSelect:a.handleSelectPrice},null,8,["value","options","onSelect"]),c(k,{class:"dropdown",value:a.duration,"onUpdate:value":e[5]||(e[5]=e=>a.duration=e),options:a.durationoptions,clearable:"",placeholder:"Duration",onSelect:a.handleSelectDuration},null,8,["value","options","onSelect"])]),u("div",Y,[Z,u("div",aa,[c(L,{trigger:"click",placement:"bottom-start",options:a.sortoptions,onSelect:a.handleSelectSort},{default:d((()=>[c(C,{strong:"",ghost:"",size:"large","icon-placement":"left"},{icon:d((()=>[c(y,null,{default:d((()=>[c(D)])),_:1})])),default:d((()=>[p(" Sort ")])),_:1})])),_:1},8,["options","onSelect"])])]),u("div",ea,[u("div",ta,[u("div",la,[(n(!0),r(h,null,v(a.products,(e=>(n(),r("div",{class:"row x-gap-20 y-gap-20",key:e.id},[u("div",oa,[u("div",ia,[u("div",sa,[u("img",{class:"cardImage col-12",src:e.image},null,8,na)]),u("div",ra,[c(C,{loading:!1,onClick:a.handleClick,strong:"",secondary:"",circle:"",type:"info"},{icon:d((()=>[c(y,null,{default:d((()=>[c(j)])),_:1})])),_:1},8,["onClick"])])])]),u("div",ca,[u("h3",ua,_(e.title),1),u("p",da,_(e.location),1),u("div",pa,_(e.types[0]),1),u("div",ha,_(e.types[1]),1)]),u("div",va,[u("div",_a,[(n(!0),r(h,null,v(e.stars,(a=>(n(),m(y,{class:"star",key:a},{default:d((()=>[c(x)])),_:2},1024)))),128))]),u("div",ma,_(e.reviews)+" reviews",1),ga,u("div",wa,"US$"+_(e.price),1),ya,u("a",{class:"button -dark-1 btn_detail",onClick:a=>this.$router.push("/trip/"+e.id)},[p(" View Detail "),c(y,{class:"margin"},{default:d((()=>[c(ba)])),_:1})],8,ka)])])))),128))])])]),c(fa,{class:"page",page:a.page,"onUpdate:page":e[6]||(e[6]=e=>a.page=e),"on-update:page":a.pageChange,"page-count":a.countPage},null,8,["page","on-update:page","page-count"])]),Ta])],64)}],["__scopeId","data-v-667c34cc"]]);export{ba as default};
